These are the instructions for setting up a new subdomain on the BTF platform. These are for an Ubuntu Linux server but should work for any Linux machine.

Generated by Google Gemini by LJM on 4/15/2025

Setting up a new web server on Nginx for a new subdomain involves creating a new server block (virtual host) configuration. Here's a step-by-step guide:

**1. Prerequisites:**

- **Nginx Installed:** Ensure that Nginx is installed and running on your server.
- **DNS Configuration:** Make sure your subdomain's DNS records (A or CNAME) are correctly pointing to your server's IP address.
- **Directory for Subdomain Files:** Create a directory to store the files for your subdomain. For example:

  ```bash
  sudo mkdir -p /var/www/subdomain.yourdomain.com/html
  ```

  Replace `subdomain.yourdomain.com` with your actual subdomain.

- **Test HTML File (Optional):** Create a simple `index.html` file in the directory for testing:

  ```bash
  echo "<h1>Welcome to subdomain.yourdomain.com</h1>" | sudo tee /var/www/subdomain.yourdomain.com/html/index.html
  ```

**2. Create a New Nginx Server Block:**

- Create a new Nginx configuration file for your subdomain. You can create this file in the `/etc/nginx/sites-available/` directory. For example:

  ```bash
  sudo nano /etc/nginx/sites-available/subdomain.yourdomain.com
  ```

- Add the following configuration to the file, replacing the placeholders with your actual values:

  ```nginx
  server {
      listen 80;
      listen [::]:80;

      server_name subdomain.yourdomain.com;

      root /var/www/subdomain.yourdomain.com/html;
      index index.html;

      location / {
          try_files $uri $uri/ =404;
      }
  }
  ```

  - `listen 80;` and `listen [::]:80;`: Listen for HTTP traffic on port 80 (IPv4 and IPv6).
  - `server_name subdomain.yourdomain.com;`: Specifies the subdomain name.
  - `root /var/www/subdomain.yourdomain.com/html;`: Sets the root directory for the subdomain's files.
  - `index index.html;`: Specifies the default index file.
  - `location / { try_files $uri $uri/ =404; }`: Handles requests and returns a 404 error if the file or directory is not found.

**3. Enable the Server Block:**

- Create a symbolic link to the configuration file in the `/etc/nginx/sites-enabled/` directory:

  ```bash
  sudo ln -s /etc/nginx/sites-available/subdomain.yourdomain.com /etc/nginx/sites-enabled/
  ```

**4. Test the Nginx Configuration:**

- Test the Nginx configuration for syntax errors:

  ```bash
  sudo nginx -t
  ```

- If the test is successful, you'll see a message like:

  ```
  nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
  nginx: configuration file /etc/nginx/nginx.conf test is successful
  ```

**5. Reload Nginx:**

- Reload Nginx to apply the changes:

  ```bash
  sudo systemctl reload nginx
  ```

**6. Obtain an SSL Certificate (Recommended):**

- For HTTPS, obtain an SSL certificate using Certbot:

  ```bash
  sudo certbot --nginx -d subdomain.yourdomain.com
  ```

  - Certbot will automatically configure Nginx to use the SSL certificate.

**7. Verify the Setup:**

- Open your web browser and navigate to `http://subdomain.yourdomain.com` (or `https://subdomain.yourdomain.com` if you set up SSL). You should see the content of your `index.html` file.
- If you encounter issues, check the Nginx error logs (`/var/log/nginx/error.log`) for troubleshooting information.

**Important Notes:**

- Always make a backup of your Nginx configuration files before making changes.
- Adjust the file paths and configuration settings to match your specific server setup.
- If you are using a firewall, ensure that ports 80 and 443 are open.
- If you wish to use a different port than 80, then change the listen directive in the nginx configuration file.
